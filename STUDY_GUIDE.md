# å‰ç«¯ AI åä½œå¼€å‘å­¦ä¹ æŒ‡å—

æœ¬æŒ‡å—ä¸“ä¸ºæ–°æ‰‹å¼€å‘è€…è®¾è®¡ï¼Œå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ AI è¿›è¡Œå‰ç«¯å¼€å‘ã€‚

**å­¦ä¹ ç­–ç•¥ï¼šBottom-up + Top-down ç»“åˆ**

- **Bottom-up**ï¼šå…ˆæŒæ¡åŸºç¡€æ¦‚å¿µï¼Œå†é˜…è¯»ä»£ç 
- **Top-down**ï¼šé¡¹ç›®ä»£ç åº“å·²ä¸¥æ ¼éµå¾ªæ¶æ„åŸåˆ™ï¼Œç»„ä»¶å¯ç›´æ¥ä½¿ç”¨

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿…é¡»æŒæ¡çš„åŸºç¡€æ¦‚å¿µ

### 1.1 æŠ€æœ¯æ ˆæ¸…å•

å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ å¯¹ä»¥ä¸‹æŠ€æœ¯æœ‰åŸºæœ¬äº†è§£ï¼š

| æŠ€æœ¯ | å­¦ä¹ é‡ç‚¹ | æ¨èèµ„æº |
|-----|---------|---------|
| React 18+ | Hooksã€ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€çŠ¶æ€ç®¡ç† | React å®˜æ–¹æ–‡æ¡£ |
| Next.js App Router | Server Componentsã€è·¯ç”±ã€å¸ƒå±€ | Next.js å®˜æ–¹æ–‡æ¡£ |
| TypeScript | ç±»å‹å®šä¹‰ã€æ¥å£ã€æ³›å‹åŸºç¡€ | TypeScript Handbook |
| Tailwind CSS | å®ç”¨ç±»ã€å“åº”å¼è®¾è®¡ã€è‡ªå®šä¹‰é…ç½® | Tailwind å®˜æ–¹æ–‡æ¡£ |

> **æç¤º**ï¼šä¸éœ€è¦ç²¾é€šæ¯ä¸€é¡¹ï¼Œä½†éœ€è¦èƒ½å¤Ÿé˜…è¯»å’Œç†è§£ä»£ç ã€‚

---

### 1.2 å¦‚ä½•ä½¿ç”¨ Gemini å¼•å¯¼å­¦ä¹ æ¨¡å¼

Gemini æä¾›äº†ä¸€ç§ã€Œå¼•å¯¼å­¦ä¹ æ¨¡å¼ã€ï¼Œå¯ä»¥å¸®åŠ©ä½ ç³»ç»Ÿæ€§åœ°å­¦ä¹ æ–°æ¦‚å¿µã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„è‡ªå­¦å·¥å…·ã€‚

**ä»€ä¹ˆæ˜¯å¼•å¯¼å­¦ä¹ æ¨¡å¼ï¼Ÿ**

Gemini çš„å¼•å¯¼å­¦ä¹ æ¨¡å¼æ˜¯ä¸€ç§äº¤äº’å¼å­¦ä¹ æ–¹å¼ã€‚å®ƒä¸ä¼šç›´æ¥ç»™ä½ ç­”æ¡ˆï¼Œè€Œæ˜¯é€šè¿‡æé—®å’Œæç¤ºï¼Œå¼•å¯¼ä½ è‡ªå·±æ€è€ƒå’Œå‘ç°ç­”æ¡ˆã€‚è¿™ç§æ–¹å¼æ›´æœ‰åŠ©äºæ·±åº¦ç†è§£å’Œé•¿æœŸè®°å¿†ã€‚

**å¦‚ä½•å¼€å¯å¼•å¯¼å­¦ä¹ æ¨¡å¼ï¼Ÿ**

1. æ‰“å¼€ Gemini ç½‘é¡µåº”ç”¨ (gemini.google.com)
2. åœ¨å¯¹è¯å¼€å§‹æ—¶ï¼Œå‘Šè¯‰ Gemini ä½ æƒ³è¦å­¦ä¹ ä»€ä¹ˆ
3. æ˜ç¡®è¦æ±‚ä½¿ç”¨ã€Œå¼•å¯¼å­¦ä¹ æ¨¡å¼ã€æˆ–ã€ŒSocratic methodã€
4. Gemini ä¼šé€šè¿‡ä¸€ç³»åˆ—é—®é¢˜å¼•å¯¼ä½ å­¦ä¹ 

**å­¦ä¹ æ–°æ¦‚å¿µçš„æœ€ä½³å®è·µæ­¥éª¤ï¼š**

1. **æ˜ç¡®å­¦ä¹ ç›®æ ‡**
   - å‘Šè¯‰ Gemini ä½ æƒ³å­¦ä¹ ä»€ä¹ˆæ¦‚å¿µ
   - è¯´æ˜ä½ çš„å½“å‰æ°´å¹³å’ŒèƒŒæ™¯çŸ¥è¯†

2. **è¯·æ±‚å¼•å¯¼å¼å­¦ä¹ **
   - ç¤ºä¾‹æç¤ºè¯ï¼šã€Œè¯·ç”¨å¼•å¯¼å­¦ä¹ æ¨¡å¼æ•™æˆ‘ [æ¦‚å¿µåç§°]ã€‚ä¸è¦ç›´æ¥å‘Šè¯‰æˆ‘ç­”æ¡ˆï¼Œè€Œæ˜¯é€šè¿‡æé—®å¼•å¯¼æˆ‘ç†è§£ã€‚ã€

3. **ç§¯æå‚ä¸å›ç­”**
   - è®¤çœŸæ€è€ƒ Gemini æå‡ºçš„æ¯ä¸ªé—®é¢˜
   - å°è¯•ç”¨è‡ªå·±çš„è¯å›ç­”
   - ä¸ç¡®å®šæ—¶è¯´å‡ºä½ çš„å›°æƒ‘

4. **è¯·æ±‚å®è·µç»ƒä¹ **
   - æ¦‚å¿µç†è§£åï¼Œè¯·æ±‚ä¸€äº›å°ç»ƒä¹ 
   - è®© Gemini æ£€æŸ¥ä½ çš„ä»£ç å¹¶ç»™å‡ºåé¦ˆ

**ç¤ºä¾‹ï¼šç”¨ Gemini å­¦ä¹  React Server Components**

```
ä½ ï¼šæˆ‘æƒ³å­¦ä¹  React Server Componentsã€‚è¯·ç”¨å¼•å¯¼å­¦ä¹ æ¨¡å¼ï¼Œé€šè¿‡æé—®å¼•å¯¼æˆ‘ç†è§£è¿™ä¸ªæ¦‚å¿µã€‚
    æˆ‘å·²ç»äº†è§£åŸºæœ¬çš„ React ç»„ä»¶å’Œ Hooksã€‚

Geminiï¼šå¥½çš„ï¼Œè®©æˆ‘ä»¬å¼€å§‹ã€‚é¦–å…ˆï¼Œä½ èƒ½å‘Šè¯‰æˆ‘ï¼Œæ™®é€šçš„ React ç»„ä»¶ï¼ˆClient Componentsï¼‰
       æ˜¯åœ¨å“ªé‡Œæ‰§è¡Œçš„å—ï¼Ÿæµè§ˆå™¨ç«¯è¿˜æ˜¯æœåŠ¡å™¨ç«¯ï¼Ÿ

ä½ ï¼šåœ¨æµè§ˆå™¨ç«¯æ‰§è¡Œã€‚

Geminiï¼šå¾ˆå¥½ï¼é‚£ä½ è§‰å¾—ï¼Œå¦‚æœä¸€ä¸ªç»„ä»¶åªæ˜¯ç”¨æ¥å±•ç¤ºæ•°æ®ï¼Œä¸éœ€è¦ä»»ä½•äº¤äº’ï¼ˆæ¯”å¦‚ç‚¹å‡»ã€
       è¾“å…¥ï¼‰ï¼Œå®ƒçœŸçš„éœ€è¦åœ¨æµè§ˆå™¨ç«¯æ‰§è¡Œå—ï¼Ÿè¿™æ ·åšæœ‰ä»€ä¹ˆæ½œåœ¨çš„é—®é¢˜ï¼Ÿ

ä½ ï¼šï¼ˆæ€è€ƒåå›ç­”...ï¼‰

[ç»§ç»­å¼•å¯¼å­¦ä¹ ...]
```

**é€‚åˆç”¨å¼•å¯¼å­¦ä¹ æ¨¡å¼å­¦ä¹ çš„æ¦‚å¿µï¼š**

- React Server Components vs Client Components
- Next.js App Router çš„å·¥ä½œåŸç†
- TypeScript ç±»å‹æ¨æ–­
- Tailwind CSS çš„è®¾è®¡ç†å¿µ
- æœ¬é¡¹ç›®çš„ L0-L5 æ¶æ„ï¼ˆä¸‹ä¸€éƒ¨åˆ†è¯¦ç»†ä»‹ç»ï¼‰

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šUI å±‚çº§ç®¡ç†ï¼ˆæ ¸å¿ƒå­¦ä¹ å†…å®¹ï¼‰

**è¿™æ˜¯æœ¬æŒ‡å—æœ€é‡è¦çš„éƒ¨åˆ†ã€‚**

æŒæ¡è¿™å¥—æ¶æ„æ˜¯ä½ èƒ½å¤Ÿæœ‰æ•ˆä¸ AI åä½œå¼€å‘çš„å…³é”®ã€‚å½“ä½ ç†è§£äº†æ¯ä¸€å±‚çš„èŒè´£å’Œè¾¹ç•Œï¼Œä½ å°±èƒ½ï¼š
- å‡†ç¡®åœ°å‘Šè¯‰ AI ä½ éœ€è¦ä»€ä¹ˆå±‚çº§çš„ç»„ä»¶
- å¿«é€Ÿåˆ¤æ–­ AI ç”Ÿæˆçš„ä»£ç æ˜¯å¦ç¬¦åˆæ¶æ„è§„èŒƒ
- é¿å…å¸¸è§çš„æ¶æ„é”™è¯¯

> **å‚è€ƒæ–‡æ¡£**ï¼š[code_principle.md](./code_principle.md) åŒ…å«å®Œæ•´çš„æ¶æ„è§„èŒƒ

---

### 2.1 L0-L5 æ¶æ„æ¦‚è§ˆ

é¡¹ç›®é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œä»åº•å±‚åˆ°é¡¶å±‚å…± 6 ä¸ªå±‚çº§ï¼š

```
L5 Pages          â† çº¯ç»„è£…ï¼Œä¸å†™æ ·å¼
    â†‘
L4 Blocks         â† é¡µé¢åŒºå—ï¼Œç¼–æ’å­ç»„ä»¶
    â†‘
L3 Custom         â† å“ç‰Œè®¾è®¡è¯­è¨€
    â†‘
L2.5 Compound     â† å¤šå…ƒç´ äº¤äº’çŠ¶æ€
    â†‘
L2 Animation      â† åŠ¨ç”»æ•ˆæœè£…é¥°
    â†‘
L1 Base           â† shadcn/ui åŸºç¡€ç»„ä»¶
    â†‘
L0 Tokens         â† è®¾è®¡ç³»ç»ŸåŸºç¡€å€¼
```

**æ¯å±‚çš„æ ¸å¿ƒèŒè´£ï¼š**

| å±‚çº§ | åç§° | èŒè´£ | å¯¹åº”ç›®å½• |
|-----|------|------|---------|
| L0 | Design Tokens | å®šä¹‰é¢œè‰²ã€é—´è·ã€å­—ä½“ã€åŠ¨ç”»æ—¶é•¿ç­‰ã€Œé­”æ³•æ•°å­—ã€ | `styles/`, `tailwind.config.js` |
| L1 | Base Primitives | shadcn/ui çš„åº•å±‚ç»„ä»¶ï¼Œåªè´Ÿè´£è§†è§‰æ ·å¼ | `components/ui/` |
| L2 | Animation Wrappers | å¯å¤ç”¨çš„åŠ¨ç”»æ•ˆæœï¼ŒåŒ…è£¹ä»»ä½•å…ƒç´ å³å¯ç”Ÿæ•ˆ | `components/animations/` |
| L2.5 | Compound Components | ç®¡ç†å¤šå…ƒç´ çš„äº¤äº’çŠ¶æ€ï¼ˆå¦‚ Tabsã€Accordionï¼‰ | `components/compound/` |
| L3 | Custom Components | åº”ç”¨å“ç‰Œè®¾è®¡è¯­è¨€çš„å®šåˆ¶ç»„ä»¶ | `components/custom/` |
| L4 | Blocks | é¡µé¢çš„ä¸»è¦æ„æˆåŒºå—ï¼Œç¼–æ’å­ç»„ä»¶çš„åŠ¨ç”»æ—¶æœº | `components/blocks/` |
| L5 | Pages | çº¯ç»„è£…å±‚ï¼Œåªè´Ÿè´£å †å  Blocks å’Œæ•°æ®è·å– | `app/` |

---

### 2.2 æ¯å±‚çš„å…³é”®è§„åˆ™

ä»¥ä¸‹æ˜¯æ¯å±‚å¿…é¡»éµå®ˆçš„è§„åˆ™ï¼Œè¿åè¿™äº›è§„åˆ™ä¼šç ´åæ¶æ„çš„ä¸€è‡´æ€§ã€‚

**L0 Design Tokens**

- æ‰€æœ‰ã€Œé­”æ³•æ•°å­—ã€å¿…é¡»åœ¨è¿™é‡Œå®šä¹‰
- ç»„ä»¶ä¸­åªèƒ½å¼•ç”¨ tokenï¼Œä¸èƒ½ç¡¬ç¼–ç é¢œè‰²ã€é—´è·ç­‰å€¼

```css
/* æ­£ç¡®ï¼šåœ¨ globals.css å®šä¹‰ token */
:root {
  --section-gap-md: 5rem;
}

/* é”™è¯¯ï¼šåœ¨ç»„ä»¶ä¸­ç¡¬ç¼–ç  */
.section { margin-bottom: 80px; }  /* âŒ */
```

**L1 Base Primitives**

- åªä¿®æ”¹è§†è§‰æ ·å¼ä»¥åŒ¹é… Design Tokens
- ä¸æ·»åŠ ä»»ä½•ä¸šåŠ¡é€»è¾‘
- Icon-only buttons å¿…é¡»æœ‰ `aria-label`
- äº¤äº’å…ƒç´ å¿…é¡»æœ‰ `focus-visible` æ ·å¼

```tsx
// æ­£ç¡®
<button aria-label="åˆ é™¤" className="focus-visible:ring-2">
  <TrashIcon aria-hidden="true" />
</button>

// é”™è¯¯
<div onClick={handleClick}><TrashIcon /></div>  // âŒ
```

**L2 Animation Wrappers**

- å¿…é¡»æ¥å— `children` å¹¶åº”ç”¨æ•ˆæœ
- å¿…é¡»æ”¯æŒ `prefers-reduced-motion`
- åªåŠ¨ç”» `transform` å’Œ `opacity`
- ç¦æ­¢ä½¿ç”¨ `transition: all`

```tsx
// æ­£ç¡®
<motion.div style={{ transition: 'transform 0.3s, opacity 0.3s' }} />

// é”™è¯¯
<motion.div style={{ transition: 'all 0.3s' }} />  // âŒ
```

**L2.5 Compound Components**

- åªç®¡ç† UI çŠ¶æ€ï¼ˆisOpen, activeTab ç­‰ï¼‰
- **ä¸èƒ½** fetch æ•°æ®
- **ä¸èƒ½** åŒ…å«ä¸šåŠ¡é€»è¾‘

**L3 Custom Components**

- å¯ä»¥ç»„åˆ L1ã€L2ã€L2.5 çš„ç»„ä»¶
- è´Ÿè´£åº”ç”¨å“ç‰Œè®¾è®¡è¯­è¨€

**L4 Blocks**

- æ˜¯å”¯ä¸€è´Ÿè´£ç¼–æ’ staggered animations çš„å±‚çº§
- å¤„ç†è‡ªå·±çš„å¸ƒå±€å’Œ section å†…é—´è·
- Block ä½œä¸ºã€ŒæŒ‡æŒ¥å®˜ã€ï¼Œæ§åˆ¶å­ç»„ä»¶çš„è¿›åœºæ—¶æœº

```tsx
// Block ä¸­ä½¿ç”¨ staggerChildren ç¼–æ’åŠ¨ç”»
<motion.div variants={{ visible: { staggerChildren: 0.1 } }}>
  {items.map(item => <Card key={item.id} />)}
</motion.div>
```

**L5 Pages**

- **ç»å¯¹ä¸å†™** `className` æˆ– inline styles
- åªè´Ÿè´£ç»„è£… Blocks å’Œ SectionSpacer
- åªè´Ÿè´£æ•°æ®è·å–ï¼ˆServer Componentsï¼‰

```tsx
// æ­£ç¡®çš„ Page å†™æ³•
export default function HomePage() {
  return (
    <>
      <HeroSection />
      <SectionSpacer size="xl" />
      <FeatureList items={features} />
      <SectionSpacer size="md" />
      <Footer />
    </>
  )
}

// é”™è¯¯ï¼šPage ä¸­å†™æ ·å¼
export default function HomePage() {
  return (
    <div className="pt-20 pb-10">  {/* âŒ */}
      <HeroSection />
    </div>
  )
}
```

---

### 2.3 çŠ¶æ€ç®¡ç†åˆ†å±‚

çŠ¶æ€ä¸æ˜¯å…¨éƒ¨æ”¾åœ¨ Page å±‚ï¼Œè€Œæ˜¯æ ¹æ®ä½œç”¨èŒƒå›´åˆ†ä¸ºä¸‰å±‚ï¼š

| çŠ¶æ€å±‚ | å®šä¹‰ä½ç½® | é€‚ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|-------|---------|---------|------|
| **Global** | `layout.tsx` + `providers/` | è·¨é¡µé¢å…±äº« | Theme, Auth, Cart |
| **Page** | `page.tsx` | å½“å‰é¡µé¢ä¸“å± | è¡¨å•æ•°æ®, é¡µé¢ filter |
| **Component** | L2.5 Compound å†…éƒ¨ | ç»„ä»¶å†…éƒ¨ UI çŠ¶æ€ | Accordion å±•å¼€, Modal æ‰“å¼€ |

**Context æ¥å£è§„èŒƒï¼ˆæ¥è‡ª Vercel Composition Patternsï¼‰**

æ‰€æœ‰ Provider å¿…é¡»ä½¿ç”¨ `{ state, actions }` æ¥å£ï¼š

```tsx
// providers/theme-provider.tsx
const ThemeContext = createContext<{
  state: { theme: 'light' | 'dark' }
  actions: { toggle: () => void }
} | null>(null)
```

---

### 2.4 CONSUME vs MANAGE çš„åŒºåˆ«

è¿™æ˜¯ç†è§£çŠ¶æ€ç®¡ç†çš„å…³é”®æ¦‚å¿µã€‚

| æ“ä½œ | å«ä¹‰ | å…è®¸çš„å±‚çº§ |
|-----|------|----------|
| **CONSUME** | è¯»å– contextï¼Œè°ƒç”¨ `actions.xxx()` | L1 - L4 éƒ½å¯ä»¥ |
| **MANAGE** | å®šä¹‰çŠ¶æ€é€»è¾‘ï¼Œå†™ `useState`, `useReducer` | åªæœ‰ Layout/Page/L2.5 |

**ç¤ºä¾‹ï¼šBlock ä¸­ä½¿ç”¨å…¨å±€çŠ¶æ€**

```tsx
// components/blocks/header.tsx (L4 Block)
'use client'
export function Header() {
  const { state, actions } = useTheme()  // âœ… CONSUME - åªè¯»å–å’Œè°ƒç”¨
  
  return (
    <header>
      <button onClick={actions.toggle}>  {/* è°ƒç”¨ actionï¼Œä¸å®šä¹‰é€»è¾‘ */}
        {state.theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™'}
      </button>
    </header>
  )
}

// é”™è¯¯ï¼šåœ¨ Block ä¸­å®šä¹‰çŠ¶æ€
function Header() {
  const [theme, setTheme] = useState('dark')  // âŒ MANAGE - Block ä¸åº”è¯¥åš
}
```

---

### 2.5 æ¶æ„æ£€æŸ¥æ¸…å•

åœ¨æäº¤ä»£ç å‰ï¼Œå¯¹ç…§æ­¤æ¸…å•æ£€æŸ¥ï¼š

**æ¶æ„å±‚é¢ï¼š**
- [ ] ç»„ä»¶æ”¾åœ¨äº†æ­£ç¡®çš„å±‚çº§ç›®å½•
- [ ] æ²¡æœ‰è·¨å±‚çº§å¼•ç”¨ï¼ˆå¦‚ Page ç›´æ¥ç”¨ Base Primitiveï¼‰
- [ ] åŠ¨ç”»åœ¨æ­£ç¡®çš„å±‚çº§å¤„ç†
- [ ] æ‰€æœ‰é­”æ³•æ•°å­—éƒ½æ›¿æ¢ä¸º Design Tokens

**æ— éšœç¢å±‚é¢ï¼š**
- [ ] Icon-only buttons æœ‰ `aria-label`
- [ ] è¡¨å•è¾“å…¥æœ‰å…³è”çš„ `<label>`
- [ ] äº¤äº’å…ƒç´ æœ‰ `focus-visible` æ ·å¼
- [ ] ä½¿ç”¨è¯­ä¹‰åŒ– HTML

**åŠ¨ç”»å±‚é¢ï¼š**
- [ ] åŠ¨ç”»æ”¯æŒ `prefers-reduced-motion`
- [ ] åªåŠ¨ç”» `transform` å’Œ `opacity`
- [ ] æ²¡æœ‰ä½¿ç”¨ `transition: all`

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šæœªæ¥å­¦ä¹ å†…å®¹ï¼ˆæš‚æ—¶è·³è¿‡ï¼‰

ä»¥ä¸‹å†…å®¹å·²åœ¨é¡¹ç›®ä¸­é…ç½®å¥½ï¼Œä½ ç›®å‰ä¸éœ€è¦æ·±å…¥å­¦ä¹ ã€‚å½“é¡¹ç›®æ›´æˆç†Ÿã€ä½ éœ€è¦è¿›è¡Œæ€§èƒ½ä¼˜åŒ–æ—¶å†å›æ¥å­¦ä¹ ã€‚

### æ¥è‡ª vercel-react-best-practicesï¼ˆP2 ä¼˜å…ˆçº§ï¼‰

| è§„åˆ™ | è¯´æ˜ | ä½•æ—¶å­¦ä¹  |
|-----|------|---------|
| `bundle-barrel-imports` | é¿å… barrel æ–‡ä»¶ï¼Œç›´æ¥ import | å½“ bundle ä½“ç§¯æˆä¸ºé—®é¢˜æ—¶ |
| `bundle-dynamic-imports` | ä½¿ç”¨ next/dynamic å»¶è¿ŸåŠ è½½ | å½“é¦–å±åŠ è½½æ…¢æ—¶ |
| `server-cache-lru` | LRU ç¼“å­˜è·¨è¯·æ±‚æ•°æ® | å½“æœ‰é«˜æµé‡åœºæ™¯æ—¶ |
| `server-cache-react` | React.cache() åŒä¸€è¯·æ±‚å»é‡ | å½“æœ‰å¤æ‚æ•°æ®è·å–æ—¶ |

### æ¥è‡ª vercel-composition-patternsï¼ˆé«˜çº§æ¨¡å¼ï¼‰

| è§„åˆ™ | è¯´æ˜ | ä½•æ—¶å­¦ä¹  |
|-----|------|---------|
| `architecture-compound-components` | å¤æ‚ç»„ä»¶çš„ Context ç»“æ„ | å½“éœ€è¦æ„å»ºç»„ä»¶åº“æ—¶ |
| `patterns-explicit-variants` | æ˜¾å¼å˜ä½“ç»„ä»¶ | å½“ç»„ä»¶ boolean props è¿‡å¤šæ—¶ |

**ä¸ºä»€ä¹ˆè·³è¿‡ï¼Ÿ**

`code_principle.md` å·²å°†è¿™äº›å½’ç±»ä¸º P2ï¼ˆé¡¹ç›®æˆç†Ÿåè€ƒè™‘ï¼‰ã€‚é¡¹ç›®æ¡†æ¶å·²ä¸ºä½ å¤„ç†å¥½åŸºç¡€ä¼˜åŒ–ï¼Œä½ å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡å¼€å‘ã€‚

---

## ç¬¬å››éƒ¨åˆ†ï¼šå³ç”¨å‹ç»„ä»¶å’ŒåŠŸèƒ½

é¡¹ç›®æä¾›äº†å¤§é‡é¢„æ„å»ºçš„ç»„ä»¶å’Œä¸šåŠ¡åŠŸèƒ½ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ä»é›¶å¼€å§‹ã€‚

---

### 4.1 é¢„æ„å»º UI ç»„ä»¶æ¸…å•

**L1 Base Primitives** (`components/ui/`)

```
Button, Input, Textarea, Card, Badge, Avatar, Label, 
Checkbox, Switch, Progress, Skeleton, Table, Form...
```

**L2 Animation Wrappers** (`components/animations/`)

```
BorderBeam, Particles, TextShimmer, Meteors, 
Ripple, RetroGrid, AvatarCircles...
```

**L2.5 Compound Components** (`components/compound/`)

```
Accordion, Tabs, Dialog, Sheet, Drawer, 
DropdownMenu, Tooltip, HoverCard, Command...
```

**L3 Custom Components** (`components/custom/`)

```
ThemeToggler, Pagination, SectionHeader, SectionSpacer,
MarkdownContent, MarkdownEditor, LocaleSelector,
BrandLogo, Copyright, Empty, ErrorBoundary...
```

**L3 AI Components** (`components/custom/ai/`)

```
Message, Response, Reasoning, Sources, Suggestion,
PromptInput, ModelSelector, Conversation...
```

---

### 4.2 é¢„æ„å»ºä¸šåŠ¡åŠŸèƒ½

ä»¥ä¸‹ä¸šåŠ¡åŠŸèƒ½å·²å®Œæ•´å®ç°ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

| åŠŸèƒ½ | ç±»å‹ | ä½ç½® | è¯´æ˜ |
|-----|------|------|------|
| **Auth** | Provider | `providers/auth-provider.tsx` | ç™»å½•ã€ç™»å‡ºã€ç”¨æˆ·ä¿¡æ¯ç®¡ç† |
| **Theme** | Provider | `providers/theme-provider.tsx` | ä¸»é¢˜åˆ‡æ¢ï¼ˆæ·±è‰²/æµ…è‰²ï¼‰ |
| **Payment** | Block | `components/blocks/payment/` | æ”¯ä»˜å¼¹çª—ã€æ”¯ä»˜æä¾›å•† |
| **Chat** | Block | `components/blocks/chat/` | AI å¯¹è¯ç•Œé¢å®Œæ•´å®ç° |
| **Dashboard** | Block | `components/blocks/dashboard/` | åå°ç®¡ç†å¸ƒå±€ |
| **Landing** | Block | `components/blocks/landing/` | è½åœ°é¡µå„ç§åŒºå— |
| **Auth UI** | Block | `components/blocks/auth/` | ç™»å½•ã€æ³¨å†Œã€éªŒè¯è¡¨å• |
| **Form** | Block | `components/blocks/form/` | è¡¨å•ç»„ä»¶å°è£… |
| **Table** | Block | `components/blocks/table/` | æ•°æ®è¡¨æ ¼å°è£… |

---

### 4.3 å¦‚ä½•ä½¿ç”¨é¢„æ„å»ºåŠŸèƒ½

**ä½¿ç”¨ Providerï¼ˆå…¨å±€çŠ¶æ€ï¼‰**

Provider å·²åœ¨ `app/layout.tsx` ä¸­é…ç½®ï¼Œä½ åªéœ€åœ¨ç»„ä»¶ä¸­ CONSUMEï¼š

```tsx
// åœ¨ä»»ä½•ç»„ä»¶ä¸­ä½¿ç”¨ Auth
'use client'
import { useAuth } from '@/providers/auth-provider'

export function UserMenu() {
  const { state, actions } = useAuthContext()
  
  if (!state.user) {
    return <button onClick={() => actions.login(email, password)}>ç™»å½•</button>
  }
  
  return (
    <div>
      <span>{state.user.name}</span>
      <button onClick={() => actions.logout()}>ç™»å‡º</button>
    </div>
  )
}
```

**ä½¿ç”¨ Blocksï¼ˆé¡µé¢åŒºå—ï¼‰**

åœ¨ Page ä¸­ç›´æ¥ç»„è£… Blocksï¼š

```tsx
// app/[locale]/(landing)/page.tsx
import { HeroSection, Features, Pricing, Footer } from '@/components/blocks/landing'
import { SectionSpacer } from '@/components/custom'

export default function HomePage() {
  return (
    <>
      <HeroSection />
      <SectionSpacer size="lg" />
      <Features />
      <SectionSpacer size="md" />
      <Pricing />
      <Footer />
    </>
  )
}
```

**ä½¿ç”¨ Chat Blockï¼ˆå®Œæ•´ AI å¯¹è¯ï¼‰**

```tsx
import { ChatBox, ChatInput, ChatMessages } from '@/components/blocks/chat'

export default function ChatPage() {
  return (
    <ChatBox>
      <ChatMessages />
      <ChatInput />
    </ChatBox>
  )
}
```

---

### 4.4 æ–‡ä»¶å¤¹ç»“æ„å‚è€ƒ

```
src/
â”œâ”€â”€ app/                          # L5 Pages
â”‚   â””â”€â”€ [locale]/
â”‚       â”œâ”€â”€ (landing)/           # è½åœ°é¡µè·¯ç”±ç»„
â”‚       â”œâ”€â”€ (auth)/              # è®¤è¯é¡µè·¯ç”±ç»„
â”‚       â”œâ”€â”€ (chat)/              # èŠå¤©é¡µè·¯ç”±ç»„
â”‚       â””â”€â”€ (admin)/             # åå°ç®¡ç†è·¯ç”±ç»„
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                      # L1 Base Primitives
â”‚   â”œâ”€â”€ animations/              # L2 Animation Wrappers
â”‚   â”œâ”€â”€ compound/                # L2.5 Compound Components
â”‚   â”œâ”€â”€ custom/                  # L3 Custom Components
â”‚   â””â”€â”€ blocks/                  # L4 Blocks
â”‚       â”œâ”€â”€ auth/
â”‚       â”œâ”€â”€ chat/
â”‚       â”œâ”€â”€ dashboard/
â”‚       â”œâ”€â”€ landing/
â”‚       â”œâ”€â”€ payment/
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ providers/                   # Global State Providers
â”‚   â”œâ”€â”€ auth-provider.tsx
â”‚   â”œâ”€â”€ theme-provider.tsx
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ style/
â”‚       â”œâ”€â”€ global.css          # L0 Design Tokens
â”‚       â””â”€â”€ theme.css
â”‚
â””â”€â”€ shared/
    â”œâ”€â”€ hooks/                   # å¯å¤ç”¨ Hooks
    â”œâ”€â”€ lib/                     # å·¥å…·å‡½æ•°
    â””â”€â”€ models/                  # æ•°æ®æ¨¡å‹
```

---

## å…³é”®å‚è€ƒæ¥æº

- **ä¸»è¦å‚è€ƒ**: [code_principle.md](./code_principle.md) - å®Œæ•´æ¶æ„è§„èŒƒ
- **Vercel Skills**ï¼ˆcode_principle.md ä¸­ P0/P1 å¼•ç”¨çš„éƒ¨åˆ†ï¼‰:
  - Context `{ state, actions }` æ¥å£ â†’ Composition Patterns 2.2
  - Provider çŠ¶æ€æå‡ â†’ Composition Patterns 2.3
  - `Promise.all()` å¹¶è¡Œè¯·æ±‚ â†’ React Best Practices 1.4
  - Suspense Boundaries â†’ React Best Practices 1.5

---

## å­¦ä¹ è·¯å¾„å»ºè®®

1. **ç¬¬ä¸€å‘¨**ï¼šå­¦ä¹ ç¬¬ä¸€éƒ¨åˆ†çš„æŠ€æœ¯æ ˆåŸºç¡€ï¼Œä½¿ç”¨ Gemini å¼•å¯¼å­¦ä¹ æ¨¡å¼
2. **ç¬¬äºŒå‘¨**ï¼šæ·±å…¥å­¦ä¹ ç¬¬äºŒéƒ¨åˆ†çš„ L0-L5 æ¶æ„ï¼Œå¯¹ç…§ä»£ç ç†è§£æ¯å±‚èŒè´£
3. **ç¬¬ä¸‰å‘¨èµ·**ï¼šå¼€å§‹ä½¿ç”¨ç¬¬å››éƒ¨åˆ†çš„é¢„æ„å»ºç»„ä»¶è¿›è¡Œå¼€å‘
4. **é¡¹ç›®æˆç†Ÿå**ï¼šå›æ¥å­¦ä¹ ç¬¬ä¸‰éƒ¨åˆ†çš„é«˜çº§ä¼˜åŒ–æŠ€å·§
